local Players = game:GetService("Players")
local VirtualUser = game:GetService("VirtualUser")
local TeleportService = game:GetService("TeleportService")
local HttpService = game:GetService("HttpService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local LocalPlayer = Players.LocalPlayer

-- Permanent Anti-AFK (Always ON - Cannot be disabled)
LocalPlayer.Idled:Connect(function()
    VirtualUser:Button2Down(Vector2.new(0, 0), workspace.CurrentCamera.CFrame)
    task.wait(1)
    VirtualUser:Button2Up(Vector2.new(0, 0), workspace.CurrentCamera.CFrame)
end)

-- Load Zaporium UI Library
local Library = loadstring(game:HttpGet('https://raw.githubusercontent.com/cheyt2025-cyber/HAYS-AI/refs/heads/main/ZAPORIUM'))()

-- Main Window
local Window = Library.CreateWindow({
    Name = "ZAPORIUM",
    LoadingTitle = "Zaporium",
    ConfigurationSaving = {Enabled = false},
    AccentColor = Color3.fromRGB(0, 212, 255),
    Logo = "rbxassetid://112586636995159",
    Credit = "Created by ScriptZap",
    EnableBooting = true
})

-- 1. Info Tab (kept exactly as it was)
local InfoTab = Window:CreateTab("Info")

InfoTab:CreateLabel("Welcome to ZAPORIUM! ‚ú®")
InfoTab:CreateLabel("Thank you so much for using my script! ‚ù§Ô∏è")
InfoTab:CreateLabel("Made with love ‚Ä¢ Fassion")
InfoTab:CreateLabel("I hope you enjoy every second using it!")
InfoTab:CreateLabel("Your support keeps me going! üöÄ")
InfoTab:CreateLabel("")
InfoTab:CreateLabel("~ ScriptZap")
InfoTab:CreateLabel("ZAPORIUM ‚Ä¢ Simple, Clean, Powerful")

InfoTab:CreateButton({
    Name = "üìã Join Discord Server",
    Callback = function()
        setclipboard("https://discord.gg/FCwb52g5")
        Window:Notify("Discord link copied to clipboard! üéâ", 4)
    end
})

-- 2. NEW FARM TAB (inserted here - second position)
local FarmTab = Window:CreateTab("Farm")

-- Toggle variables
local OPClicker = false
local AutoBuyLevel = false
local AutoBuyNoob1 = false
local AutoBuyNoob10 = false
local AutoRebirth = false

-- OP Clicker Toggle
FarmTab:CreateToggle({
    Name = "OP Clicker",
    Default = false,
    Callback = function(state)
        OPClicker = state
        if state then
            Window:Notify("OP Clicker Enabled", 3)
            task.spawn(function()
                while OPClicker do
                    pcall(function()
                        ReplicatedStorage.Events.Click:FireServer()
                    end)
                    task.wait(0.05) -- ~20 clicks per second
                end
            end)
        else
            Window:Notify("OP Clicker Disabled", 3)
        end
    end
})

-- Buy Level Toggle (every 1 second)
FarmTab:CreateToggle({
    Name = "Buy Level",
    Default = false,
    Callback = function(state)
        AutoBuyLevel = state
        if state then
            Window:Notify("Auto Buy Level Enabled", 3)
            task.spawn(function()
                while AutoBuyLevel do
                    pcall(function()
                        ReplicatedStorage.Events.BuyLevel:FireServer()
                    end)
                    task.wait(1)
                end
            end)
        else
            Window:Notify("Auto Buy Level Disabled", 3)
        end
    end
})

-- Buy Noob (1) Toggle
FarmTab:CreateToggle({
    Name = "Buy Noob (1)",
    Default = false,
    Callback = function(state)
        AutoBuyNoob1 = state
        if state then
            Window:Notify("Auto Buy Noob (1) Enabled", 3)
            task.spawn(function()
                while AutoBuyNoob1 do
                    pcall(function()
                        ReplicatedStorage.Events.BuyNoob:FireServer()
                    end)
                    task.wait(0.3) -- small delay to prevent spam errors
                end
            end)
        else
            Window:Notify("Auto Buy Noob (1) Disabled", 3)
        end
    end
})

-- Buy Noob 10 Toggle
FarmTab:CreateToggle({
    Name = "Buy Noob (10)",
    Default = false,
    Callback = function(state)
        AutoBuyNoob10 = state
        if state then
            Window:Notify("Auto Buy Noob (10) Enabled", 3)
            task.spawn(function()
                while AutoBuyNoob10 do
                    pcall(function()
                        ReplicatedStorage.Events.BuyNoob:FireServer(10)
                    end)
                    task.wait(0.5)
                end
            end)
        else
            Window:Notify("Auto Buy Noob (10) Disabled", 3)
        end
    end
})

-- Auto Rebirth Toggle (every 2 seconds)
FarmTab:CreateToggle({
    Name = "Auto Rebirth",
    Default = false,
    Callback = function(state)
        AutoRebirth = state
        if state then
            Window:Notify("Auto Rebirth Enabled", 3)
            task.spawn(function()
                while AutoRebirth do
                    pcall(function()
                        ReplicatedStorage.Events.Rebirth:FireServer()
                    end)
                    task.wait(2)
                end
            end)
        else
            Window:Notify("Auto Rebirth Disabled", 3)
        end
    end
})

-- 3. Misc Tab (unchanged, still third in order)
local MiscTab = Window:CreateTab("Misc")

-- Hop Server Button
MiscTab:CreateButton({
    Name = "Hop Server",
    Callback = function()
        Window:Notify("Hopping to a new server...", 3)
        local servers = HttpService:JSONDecode(game:HttpGet("https://games.roblox.com/v1/games/"..game.PlaceId.."/servers/Public?sortOrder=Asc&limit=100"))
        local available = {}
        for _, v in pairs(servers.data) do
            if v.playing < v.maxPlayers and v.id ~= game.JobId then
                table.insert(available, v.id)
            end
        end
        if #available > 0 then
            TeleportService:TeleportToPlaceInstance(game.PlaceId, available[math.random(1, #available)], LocalPlayer)
        else
            Window:Notify("No available servers found!", 4)
        end
    end
})

-- WalkSpeed Slider
MiscTab:CreateSlider({
    Name = "WalkSpeed",
    Min = 16,
    Max = 300,
    Default = 16,
    Callback = function(value)
        if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
            LocalPlayer.Character.Humanoid.WalkSpeed = value
        end
        LocalPlayer.CharacterAdded:Connect(function(char)
            task.wait()
            if char:FindFirstChild("Humanoid") then
                char.Humanoid.WalkSpeed = value
            end
        end)
    end
})

-- Rejoin Server Button
MiscTab:CreateButton({
    Name = "Rejoin Server",
    Callback = function()
        Window:Notify("Rejoining server...", 3)
        task.wait(0.3)
        TeleportService:Teleport(game.PlaceId, LocalPlayer)
    end
})

-- Success Notification
Window:Notify("ZAPORIUM Loaded ‚Ä¢ Anti-AFK ON", 6)
